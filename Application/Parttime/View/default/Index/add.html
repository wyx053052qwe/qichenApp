<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <include file="Home@default/public/meta" />
    <link href="{:C('TPL_HOME_PUBLIC_DIR')}/css/common.css" rel="stylesheet" type="text/css" />
    <link href="{:C('TPL_PUBLIC_DIR')}/css/parttime.css" rel="stylesheet" type="text/css" />
    <script src="{:C('TPL_HOME_PUBLIC_DIR')}/js/company/jquery.common.js" type="text/javascript" language="javascript"></script>
    <qscms:load type="category" search="1"/>
</head>
<body style="background-color:#f0f0f0;">
<include file="Home@default/public/header_other" />
<!--搜索 -->
<div class="new-search-box">
    <div class="ns-main-form">
        <eq name="new_record" value="1">发布<else />修改</eq>兼职招聘
    </div>
</div>
<div class="main-box">
    <div class="profile_wrap">
        <div class="basic_form J_focus">
            <div class="item">
                <div class="item_label"><span class="asterisk"></span>兼职名称：</div>
                <div class="item_val">
                    <input type="text" value="{$jobs.jobs_name}" class="input_205_34 w518" id="jobs_name" name="jobs_name" placeholder="请输入兼职名称">
                </div>
                <div class="clear"></div>
            </div>
            <div class="item">
                <div class="item_label"><span class="asterisk"></span>兼职类型：</div>
                <div class="item_val select_input select_205_34 J_hoverinput J_dropdown J_listitme_parent">
                    <span class="J_listitme_text">{$jobs['category_cn']|default="请选择"}</span>
                    <div class="dropdowbox J_dropdown_menu">
                        <div class="dropdow_inner">
                            <ul class="nav_box">
                                <volist name="category_jobs" id="vo">
                                    <li><a class="J_listitme" href="javascript:;" data-code="{$key}" >{$vo}</a></li>
                                </volist>
                            </ul>
                        </div>
                    </div>
                    <input class="J_listitme_code" name="category" id="category" type="hidden" value="{$jobs.category}" />
                </div>
                <div class="clear"></div>
            </div>
            <div class="item">
                <div class="item_label">招聘人数：</div>
                <div class="item_val">
                    <input type="text" value="{$jobs.amount}" class="input_205_34" name="amount" id="amount" placeholder="留空则为若干">
                </div>
                <div class="clear"></div>
            </div>
            <div class="item">
                    <div class="item_label"><span class="asterisk"></span>工作地区：</div>
                    <div class="item_val select_input_multi select_205_34 w518 J_hoverinput" data-toggle="funCityModal" data-title="请选择工作地区" data-multiple="false" data-maximum="0" data-width="760">
                    <span title="" class="result J_resuletitle_city">{$jobs.district_cn|default="请选择"}</span>
                    <input class="J_resultcode_city" name="district" id="district" type="hidden" value="<if condition="$jobs['district']">{$jobs.district}</if>" keep="<if condition="$jobs['district']">{$jobs.district}</if>" />
                    <div class="clear"></div>
                </div>
                <div class="clear"></div>
            </div>
            <div class="item">
                <div class="item_label"><span class="asterisk"></span>详细地址：</div>
                <div class="item_val">
                    <input type="text" value="{$jobs.address}" class="input_205_34 w518" name="address" id="address" placeholder="请输入详细地址">
                </div>
                <div class="clear"></div>
            </div>
            <div class="item">
                <div class="item_label"><span class="asterisk"></span>薪资待遇：</div>
                <div class="item_val">
                    <input type="text" value="{$jobs.wage}" class="input_205_34" name="wage" id="wage" placeholder="请输入薪资待遇">
                </div>
                <div class="item_val select_input select_130_34 J_hoverinput J_dropdown J_listitme_parent">
                    <span class="J_listitme_text">
                        <eq name="new_record" value="1">
                        <volist name="category_wage" id="vo" offset="0" length="1">
                        元/{$vo}
                        </volist>
                        <else />
                        元/{$jobs['wage_type_cn']}
                        </eq>
                    </span>
                    <div class="dropdowbox J_dropdown_menu">
                        <div class="dropdow_inner wage">
                            <ul class="nav_box">
                                <volist name="category_wage" id="vo">
                                    <li><a class="J_listitme" href="javascript:;" data-code="{$key}" >元/{$vo}</a></li>
                                </volist>
                            </ul>
                        </div>
                    </div>
                    <eq name="new_record" value="1">
                        <volist name="category_wage" id="vo" offset="0" length="1">
                        <input class="J_listitme_code" name="wage_type" id="wage_type" type="hidden" value="{$key}" />
                        </volist>
                    <else />
                        <input class="J_listitme_code" name="wage_type" id="wage_type" type="hidden" value="{$jobs.wage_type}" />
                    </eq>
                </div>
                <div class="clear"></div>
            </div>
            <div class="item">
                <div class="item_label"><span class="asterisk"></span>结算方式：</div>
                <div class="item_val select_input select_205_34 J_hoverinput J_dropdown J_listitme_parent">
                    <span class="J_listitme_text">
                        <eq name="new_record" value="1">
                        <volist name="category_settlement" id="vo" offset="0" length="1">
                        {$vo}
                        </volist>
                        <else />
                        {$jobs['settlement_cn']}
                        </eq>
                    </span>
                    <div class="dropdowbox J_dropdown_menu">
                        <div class="dropdow_inner">
                            <ul class="nav_box">
                                <volist name="category_settlement" id="vo">
                                    <li><a class="J_listitme" href="javascript:;" data-code="{$key}" >{$vo}</a></li>
                                </volist>
                            </ul>
                        </div>
                    </div>
                    <eq name="new_record" value="1">
                        <volist name="category_settlement" id="vo" offset="0" length="1">
                        <input class="J_listitme_code" name="settlement" id="settlement" type="hidden" value="{$key}" />
                        </volist>
                    <else />
                        <input class="J_listitme_code" name="settlement" id="settlement" type="hidden" value="{$jobs.settlement}" />
                    </eq>
                </div>
                <div class="clear"></div>
            </div>
            <div class="item">
                <div class="item_label">薪资备注：</div>
                <div class="item_val">
                    <input type="text" value="{$jobs.wage_remark}" class="input_205_34 w518" name="wage_remark" id="wage_remark" placeholder="请输入薪资备注">
                </div>
                <div class="clear"></div>
            </div>
            <div class="item">
                <div class="item_label"><span class="asterisk"></span>工作周期：</div>
                <div class="item_val">
                    <div class="w120 fl time">
                        <input name="cycle_starttime" id="cycle_starttime" value="{$jobs.cycle_starttime}" class="input_val pdl w120 select_input_date" type="text" placeholder="开始时间">
                    </div>
                    <div class="fl partition time">-</div>
                    <div class="w120 fl time">
                        <input name="cycle_endtime" id="cycle_endtime" value="{$jobs.cycle_endtime}" class="input_val pdl w120 select_input_date" type="text" placeholder="结束时间">
                    </div>
                    <label class="checkBox ml20 fl" for="long_period"><input class="J_switch" name="long_period" id="long_period" value="1" type="checkbox" <if condition="$jobs['long_period']">checked="checked"</if>>长期招聘</label>
                </div>
                <div class="clear"></div>
            </div>
            <div class="item">
                <div class="item_label"><span class="asterisk"></span>工作时间：</div>
                <div class="item_val" style="width:500px;">
                    <div class="work-time">
                        <table class="table font12">
                            <tbody><tr>
                                <th>&nbsp;</th>
                                <th>周一</th>
                                <th>周二</th>
                                <th>周三</th>
                                <th>周四</th>
                                <th>周五</th>
                                <th>周六</th>
                                <th>周日</th>
                            </tr>
                            <tr>
                                <th>上午</th>
                                <td <if condition="in_array('0101',$jobs['worktime'])">class="active"</if>><input name="worktime[]" type="checkbox" value="0101" <if condition="in_array('0101',$jobs['worktime'])">checked</if>></td>
                                <td <if condition="in_array('0201',$jobs['worktime'])">class="active"</if>><input name="worktime[]" type="checkbox" value="0201" <if condition="in_array('0201',$jobs['worktime'])">checked</if>></td>
                                <td <if condition="in_array('0301',$jobs['worktime'])">class="active"</if>><input name="worktime[]" type="checkbox" value="0301" <if condition="in_array('0301',$jobs['worktime'])">checked</if>></td>
                                <td <if condition="in_array('0401',$jobs['worktime'])">class="active"</if>><input name="worktime[]" type="checkbox" value="0401" <if condition="in_array('0401',$jobs['worktime'])">checked</if>></td>
                                <td <if condition="in_array('0501',$jobs['worktime'])">class="active"</if>><input name="worktime[]" type="checkbox" value="0501" <if condition="in_array('0501',$jobs['worktime'])">checked</if>></td>
                                <td <if condition="in_array('0601',$jobs['worktime'])">class="active"</if>><input name="worktime[]" type="checkbox" value="0601" <if condition="in_array('0601',$jobs['worktime'])">checked</if>></td>
                                <td <if condition="in_array('0701',$jobs['worktime'])">class="active"</if>><input name="worktime[]" type="checkbox" value="0701" <if condition="in_array('0701',$jobs['worktime'])">checked</if>></td>
                            </tr>
                            <tr>
                                <th>下午</th>
                                <td <if condition="in_array('0102',$jobs['worktime'])">class="active"</if>><input name="worktime[]" type="checkbox" value="0102" <if condition="in_array('0102',$jobs['worktime'])">checked</if>></td>
                                <td <if condition="in_array('0202',$jobs['worktime'])">class="active"</if>><input name="worktime[]" type="checkbox" value="0202" <if condition="in_array('0202',$jobs['worktime'])">checked</if>></td>
                                <td <if condition="in_array('0302',$jobs['worktime'])">class="active"</if>><input name="worktime[]" type="checkbox" value="0302" <if condition="in_array('0302',$jobs['worktime'])">checked</if>></td>
                                <td <if condition="in_array('0402',$jobs['worktime'])">class="active"</if>><input name="worktime[]" type="checkbox" value="0402" <if condition="in_array('0402',$jobs['worktime'])">checked</if>></td>
                                <td <if condition="in_array('0502',$jobs['worktime'])">class="active"</if>><input name="worktime[]" type="checkbox" value="0502" <if condition="in_array('0502',$jobs['worktime'])">checked</if>></td>
                                <td <if condition="in_array('0602',$jobs['worktime'])">class="active"</if>><input name="worktime[]" type="checkbox" value="0602" <if condition="in_array('0602',$jobs['worktime'])">checked</if>></td>
                                <td <if condition="in_array('0702',$jobs['worktime'])">class="active"</if>><input name="worktime[]" type="checkbox" value="0702" <if condition="in_array('0702',$jobs['worktime'])">checked</if>></td>
                            </tr>
                            <tr>
                                <th>晚上</th>
                                <td <if condition="in_array('0103',$jobs['worktime'])">class="active"</if>><input name="worktime[]" type="checkbox" value="0103" <if condition="in_array('0103',$jobs['worktime'])">checked</if>></td>
                                <td <if condition="in_array('0203',$jobs['worktime'])">class="active"</if>><input name="worktime[]" type="checkbox" value="0203" <if condition="in_array('0203',$jobs['worktime'])">checked</if>></td>
                                <td <if condition="in_array('0303',$jobs['worktime'])">class="active"</if>><input name="worktime[]" type="checkbox" value="0303" <if condition="in_array('0303',$jobs['worktime'])">checked</if>></td>
                                <td <if condition="in_array('0403',$jobs['worktime'])">class="active"</if>><input name="worktime[]" type="checkbox" value="0403" <if condition="in_array('0403',$jobs['worktime'])">checked</if>></td>
                                <td <if condition="in_array('0503',$jobs['worktime'])">class="active"</if>><input name="worktime[]" type="checkbox" value="0503" <if condition="in_array('0503',$jobs['worktime'])">checked</if>></td>
                                <td <if condition="in_array('0603',$jobs['worktime'])">class="active"</if>><input name="worktime[]" type="checkbox" value="0603" <if condition="in_array('0603',$jobs['worktime'])">checked</if>></td>
                                <td <if condition="in_array('0703',$jobs['worktime'])">class="active"</if>><input name="worktime[]" type="checkbox" value="0703" <if condition="in_array('0703',$jobs['worktime'])">checked</if>></td>
                            </tr></tbody>
                        </table>
                    </div>
                </div>
                <div class="clear"></div>
            </div>
            
            <div class="item">
                <div class="item_label"><span class="asterisk"></span>职位描述：</div>
                <div class="item_val">
                    <textarea class="textarea_438_34 w518" rows="" cols="" name="contents" id="contents">{$jobs.contents}</textarea>
                </div>
                <div class="clear"></div>
            </div>
    <eq name="new_record" value="1">
        <eq name="need_mobile_audit" value="1">
            <div class="item">
                <div class="item_label"><span class="asterisk"></span>联系人：</div>
                <div class="item_val">
                    <input type="text" value="{$jobs.contact}" class="input_205_34" name="contact" id="contact" placeholder="请输入联系人">
                </div>
                <div class="clear"></div>
            </div>
            <div class="item">
                <div class="item_label"><span class="asterisk"></span>联系电话：</div>
                <div class="item_val fl">
                    <input type="text" value="{$mobile}" class="input_205_34" name="mobile" id="mobile" placeholder="请输入联系电话">
                </div>
                <div class="search fl btn_blue J_hoverbut btn_100_32 btn_inline" id="getVerfyCode">获取验证码</div>
                <div class="clear"></div>
            </div>
            <div class="item">
                <div class="item_label"><span class="asterisk"></span>验证码：</div>
                <div class="item_val fl">
                    <input type="text" value="" id="verify_code" class="input_205_34" name="mobile_vcode">
                </div>
                <div class="clear"></div>
            </div>
        <else />
            <div class="item">
                <div class="item_label"><span class="asterisk"></span>联系人：</div>
                <div class="item_val">
                    <input type="text" value="{$contact}" class="input_205_34" name="contact" id="contact" placeholder="请输入联系人">
                </div>
                <div class="clear"></div>
            </div>
            <div class="item">
                <div class="item_label"><span class="asterisk"></span>联系电话：</div>
                <div class="item_val fl">
                    <input type="text" value="{$mobile}" class="input_205_34" name="mobile" id="mobile" disabled placeholder="请输入联系电话">
                </div>
                <div class="clear"></div>
            </div>
        </eq>
    <else />
        <div class="item">
            <div class="item_label"><span class="asterisk"></span>联系人：</div>
            <div class="item_val">
                <input type="text" value="{$jobs.contact}" class="input_205_34" name="contact" id="contact" disabled placeholder="请输入联系人">
            </div>
            <div class="clear"></div>
        </div>
        <div class="item">
            <div class="item_label"><span class="asterisk"></span>联系电话：</div>
            <div class="item_val fl">
                <input type="text" value="{$mobile}" class="input_205_34" name="mobile" id="mobile" disabled placeholder="请输入联系电话">
            </div>
            <div class="clear"></div>
        </div>
    </eq>
            <div class="item">
                <div class="item_label">&nbsp;</div>
                <div class="item_val">
                    <input type="hidden" id="id" value="{$jobs.id}">
                    <input type="hidden" id="J_captcha_open" value="<if condition="C('qscms_captcha_open') eq 1 && C('qscms_captcha_config.varify_mobile') eq 1">1<else/>0</if>" />
                    <eq name="new_record" value="1">
                    <div class="btn_blue J_hoverbut btn_115_38" id="J_release" data-title="发布">发布</div>
                    <else />
                    <div class="btn_blue J_hoverbut btn_115_38" id="J_release" data-title="修改">修改</div>
                    </eq>
                </div>
                <div class="item_val" style="margin-left:10px;">
                    <div class="btn_gray9 J_hoverbut btn_115_38" onclick="javascript:history.go(-1)">返回</div>
                </div>
                <div class="clear"></div>
            </div>
        </div>
    </div>
</div>
<div style="display:none" id="pop"></div>
<input type="hidden" id="btnCheck" />
<div class="clear"></div>
<include file="Home@default/public/footer_min" />
<script type="text/javascript" src="{:C('TPL_HOME_PUBLIC_DIR')}/js/laydate/laydate.js"></script>
<script type="text/javascript" src="{:C('TPL_HOME_PUBLIC_DIR')}/js/jquery.dropdown.js"></script>
<script type="text/javascript" src="{:C('TPL_HOME_PUBLIC_DIR')}/js/jquery.listitem.js"></script>
<script type="text/javascript" src="{:C('TPL_HOME_PUBLIC_DIR')}/js/jquery.user.city.js"></script>
<script src="https://static.geetest.com/static/tools/gt.js"></script>
<script type="text/javascript">
        $('.work-time td').on("click",function(){
            if($(this).find('input').is(':checked')){
                $(this).addClass('active');
            }else{
                $(this).removeClass('active');
            }
        });
        if ($('#long_period').is(':checked')) {
            $('#long_period').closest('.item_val').find('.input_val').val('').prop('disabled', !0);
            $('.time').hide();
        } 
        $('#long_period').die().live('click', function(event) {
            if ($(this).is(':checked')) {
                $(this).closest('.item_val').find('.input_val').val('').prop('disabled', !0);
                $('.time').hide();
            } else {
                $(this).closest('.item_val').find('.input_val').each(function(index, el) {
                    $(this).val($(this).data('title')).prop('disabled', 0);
                });
                $('.time').show();
            }
        });
        laydate.render({
            elem: '#cycle_starttime',
            min: 0
        });
        laydate.render({
            elem: '#cycle_endtime',
            min: 0
        });
        // 验证手机号
        var regularMobile = qscms.regularMobile;
        var regularTelLast = /^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/; // 验证分机号码
        
        // 删除隐藏极验表单
        function clearHideGee() {
            if ($('.geetest_challenge').length) {
                $('.geetest_challenge').remove();
                $('.geetest_validate').remove();
                $('.geetest_seccode').remove();
            }
        }
        /**
         * 发送手机验证码
         */
        $('#getVerfyCode').on('click', function() {
            if ($(this).hasClass('btn_lightgray')) return false;
            var mobileValue = $.trim($('input[name=mobile]').val());
            var captcha_open = eval($('#J_captcha_open').val());
            if (mobileValue == '') {
                disapperTooltip("remind", "请输入手机号码");
                return false;
            }
            if (mobileValue != "" && !regularMobile.test(mobileValue)) {
                disapperTooltip("remind", "手机号码格式不正确");
                return false;
            }
            if (captcha_open) {
                $('.geetest_panel').remove();
                clearHideGee();
                $.ajax({
                    url: qscms.root+'?m=Home&c=captcha&t=' + (new Date()).getTime(),
                    type: "get",
                    dataType: "json",
                    success: function (data) {
                        initGeetest({
                            gt: data.gt,
                            challenge: data.challenge,
                            offline: !data.success,
                            new_captcha: data.new_captcha,
                            product: 'bind'
                        }, function(captchaObj) {
                            captchaObj.appendTo("#pop");
                            captchaObj.onSuccess(function() {
                                var captChaResult = captchaObj.getValidate();
                                $('#getVerfyCode').addClass('btn_lightgray');
                                $('#getVerfyCode').removeClass('btn_blue');
                                $('#getVerfyCode').text('发送中...');
                                var mobileValue = $.trim($('input[name=mobile]').val());
                                $.ajax({
                                    url: "{:U('Parttime/Index/send_sms')}",
                                    cache: false,
                                    async: false,
                                    type: 'post',
                                    dataType: 'json',
                                    data: { sms_type: 'login', mobile: mobileValue,geetest_challenge: captChaResult.geetest_challenge,geetest_validate: captChaResult.geetest_validate,geetest_seccode: captChaResult.geetest_seccode},
                                    success: function(result) {
                                        $('#pop').hide();
                                        disapperTooltip("success", result.msg);
                                        if (result.status) {
                                            // 开始倒计时
                                            var countdown = 180;
                                            function settime() {
                                                if (countdown == 0) {
                                                    $('#getVerfyCode').removeClass('btn_lightgray');
                                                    $('#getVerfyCode').addClass('btn_blue');
                                                    $('#getVerfyCode').text('获取验证码');
                                                    countdown = 180;
                                                    return;
                                                } else {
                                                    $('#getVerfyCode').addClass('btn_lightgray');
                                                    $('#getVerfyCode').removeClass('btn_blue');
                                                    $('#getVerfyCode').text('重新发送' + countdown + '秒');
                                                    countdown--;
                                                }
                                                setTimeout(function() {
                                                    settime()
                                                },1000)
                                            }
                                            settime();
                                        } else {
                                            $('#getVerfyCode').removeClass('btn_lightgray');
                                            $('#getVerfyCode').addClass('btn_blue');
                                            $('#getVerfyCode').text('获取验证码');
                                            $('#pop').hide();
                                            disapperTooltip("remind", result.msg);
                                        }
                                    }
                                });
                            });
                            captchaObj.onReady(function () {
                                $("#btnCheck").click();
                            });
                            $('#btnCheck').click(function () {
                                captchaObj.verify();
                            })
                        });
                    }
                });
            } else {
                sendVerfy();
            }
        })
        /**
         * 发送手机验证码
         */
        function sendVerfy() {
            $('#getVerfyCode').addClass('btn_lightgray');
            $('#getVerfyCode').removeClass('btn_blue');
            $('#getVerfyCode').text('发送中...');
            var mobileValue = $.trim($('input[name=mobile]').val());
            $.ajax({
                url: "{:U('Parttime/Index/send_sms')}",
                cache: false,
                async: false,
                type: 'post',
                dataType: 'json',
                data: { sms_type: 'login', mobile: mobileValue},
                success: function(result) {
                    $('#pop').hide();
                    disapperTooltip("success", result.msg);
                    if (result.status) {
                        // 开始倒计时
                        var countdown = 180;
                        function settime() {
                            if (countdown == 0) {
                                $('#getVerfyCode').removeClass('btn_lightgray');
                                $('#getVerfyCode').addClass('btn_blue');
                                $('#getVerfyCode').text('获取验证码');
                                countdown = 180;
                                return;
                            } else {
                                $('#getVerfyCode').addClass('btn_lightgray');
                                $('#getVerfyCode').removeClass('btn_blue');
                                $('#getVerfyCode').text('重新发送' + countdown + '秒');
                                countdown--;
                            }
                            setTimeout(function() {
                                settime()
                            },1000)
                        }
                        settime();
                    } else {
                        $('#getVerfyCode').removeClass('btn_lightgray');
                        $('#getVerfyCode').addClass('btn_blue');
                        $('#getVerfyCode').text('获取验证码');
                        $('#pop').hide();
                        disapperTooltip("remind", result.msg);
                    }
                }
            });
        }
        // 发布兼职
        $('#J_release').click(function(){
            var id = $.trim($('#id').val());
            var jobsNameValue = $.trim($('#jobs_name').val());
            var categoryValue = $.trim($('#category').val());
            var amountValue = $.trim($('#amount').val());
            var district = $.trim($('#district').val());
            var address = $.trim($('#address').val());
            var contentsValue = $.trim($('#contents').val());
            var wageValue = $.trim($('#wage').val());
            var wageTypeValue = $.trim($('#wage_type').val());
            var wageRemarkValue = $.trim($('#wage_remark').val());
            var settlementValue = $.trim($('#settlement').val());
            var cycleStarttimeValue = $.trim($('#cycle_starttime').val());
            var cycleEndtimeValue = $.trim($('#cycle_endtime').val());
            var longPeriodValue = $('#long_period').is(":checked")?1:0;
            var workTimeArr = new Array();
            $("input[name='worktime[]']:checked").each(function (index, val) {
                workTimeArr.push($(this).val());
            });
            var contactValue = eval("{$new_record}")==1?$.trim($('#contact').val()):"{$jobs['contact']}";
            var mobileValue = eval("{$new_record}")==1?(eval("{$need_mobile_audit}"==1)?$.trim($('#mobile').val()):"{$mobile}"):"{$mobile}";
            var verifycodeValue = $.trim($('input[name=mobile_vcode]').val());
            if (jobsNameValue == "") {
                disapperTooltip("remind", "请填写兼职名称");
                return false;
            }
            if (categoryValue == 0) {
                disapperTooltip("remind", "请选择兼职类型");
                return false;
            }
            if (district == "") {
                disapperTooltip("remind", "请选择工作地区");
                return false;
            }
            if (address == "") {
                disapperTooltip("remind", "请填写详细地址");
                return false;
            }
            if (address != "" && address.length > 30) {
                disapperTooltip("remind", "详细地址不能大于30个字");
                return false;
            }
            if (wageValue == "") {
                disapperTooltip("remind", "请填写薪资待遇");
                return false;
            }
            if (!$('#long_period').val()) {
                if (!cycleStarttimeValue || !cycleEndtimeValue) {
                    disapperTooltip("remind", "请填写工作周期");
                    return false;
                }
            }
            if(workTimeArr.length == 0){
                disapperTooltip("remind", "请选择工作时间");
                return false;
            }
            if (contentsValue == "") {
                disapperTooltip("remind", "请填写职位描述");
                return false;
            }
            if (contactValue == "") {
                disapperTooltip("remind", "请填写联系人");
                return false;
            }
            if (contactValue != "" && contactValue.length > 10) {
                disapperTooltip("remind", "联系人1-10个字");
                return false;
            }
            if (mobileValue != "" && !regularMobile.test(mobileValue)) {
                disapperTooltip("remind", "手机号格式不正确");
                return false;
            }
            if (verifycodeValue == '' && eval("{$new_record}")==1 && eval("{$need_mobile_audit}")==1) {
                disapperTooltip("remind", "请输入手机验证码");
                return false;
            }
            $(this).html('正在保存...');
            $(this).addClass('qs-btn-border-disabled');
            $.ajax({
                url: "<eq name='new_record' value='1'>{:U('Parttime/Index/add')}<else />{:U('Parttime/Index/edit')}</eq>",
                type: 'POST',
                dataType: 'json',
                data: {id:id,jobs_name: jobsNameValue, category: categoryValue, amount: amountValue, district: district, address: address, contents: contentsValue, wage: wageValue, wage_type: wageTypeValue, settlement: settlementValue, wage_remark: wageRemarkValue, cycle_starttime: cycleStarttimeValue, cycle_endtime: cycleEndtimeValue, long_period: longPeriodValue, worktime: workTimeArr, contact: contactValue, mobile: mobileValue,mobile_vcode:verifycodeValue},
                success:function(result){
                    if (result.status == 1) {
                        disapperTooltip("success", result.msg);
                        setTimeout(function () {
                            location.href = result.data.url;
                        }, 2000);
                    } else {
                        $("#J_release").html($('#J_release').data('title'));
                        $("#J_release").removeClass('qs-btn-border-disabled');
                        disapperTooltip("remind", result.msg);
                    }
                },
                error:function(){
                    $("#J_release").html($('#J_release').data('title'));
                    $("#J_release").removeClass('qs-btn-border-disabled');
                    disapperTooltip("remind", result.msg);
                }
            });
        });
</script>
</body>
</html>